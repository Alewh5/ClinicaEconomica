import{u as M,o as F,r as g,c as n,a as e,b as a,w as H,d as v,f as p,v as h,e as y,l as T,q as P,F as _,s as B,x as r,k as i,t as m,z as D,g as N,h as c}from"./index-ca603161.js";import{x as d}from"./index-d159f55b.js";const L={class:"flex justify-between items-center"},S=e("h3",{class:"sm:text-2xl text-lg font-semibold text-gray-700"}," Vista de Factura de Venta ",-1),j={class:"flex flex-col items-start w-26 sm:flex-row sm:items-center"},E=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-box-arrow-left h-4 w-4 mr-2",viewBox:"0 0 16 16"},[e("path",{"fill-rule":"evenodd",d:"M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"}),e("path",{"fill-rule":"evenodd",d:"M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"})],-1),R=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-floppy-fill h-4 w-4 mr-2",viewBox:"0 0 512 512"},[e("path",{d:"M128 0C92.7 0 64 28.7 64 64l0 96 64 0 0-96 226.7 0L384 93.3l0 66.7 64 0 0-66.7c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0L128 0zM384 352l0 32 0 64-256 0 0-64 0-16 0-16 256 0zm64 32l32 0c17.7 0 32-14.3 32-32l0-96c0-35.3-28.7-64-64-64L64 192c-35.3 0-64 28.7-64 64l0 96c0 17.7 14.3 32 32 32l32 0 0 64c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-64zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"})],-1),A={key:0,class:"text-red-600 mt-2"},O={key:1,class:"text-green-600 mt-2"},$={class:"mt-6"},I={class:"px-4 pb-8 pt-5 bg-white shadow-md"},q={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},G={key:0},Z=e("label",{class:"text-gray-700",for:"customer_id"},"Cliente",-1),W={class:"flex mt-2"},J=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-alphabet-uppercase pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M1.226 10.88H0l2.056-6.26h1.42l2.047 6.26h-1.29l-.48-1.61H1.707l-.48 1.61ZM2.76 5.818h-.054l-.75 2.532H3.51zm3.217 5.062V4.62h2.56c1.09 0 1.808.582 1.808 1.54 0 .762-.444 1.22-1.05 1.372v.055c.736.074 1.365.587 1.365 1.528 0 1.119-.89 1.766-2.133 1.766zM7.18 5.55v1.675h.8c.812 0 1.171-.308 1.171-.853 0-.51-.328-.822-.898-.822zm0 2.537V9.95h.903c.951 0 1.342-.312 1.342-.909 0-.591-.382-.954-1.095-.954zm5.089-.711v.775c0 1.156.49 1.803 1.347 1.803.705 0 1.163-.454 1.212-1.096H16v.12C15.942 10.173 14.95 11 13.607 11c-1.648 0-2.573-1.073-2.573-2.849v-.78c0-1.775.934-2.871 2.573-2.871 1.347 0 2.34.849 2.393 2.087v.115h-1.172c-.05-.665-.516-1.156-1.212-1.156-.849 0-1.347.67-1.347 1.83"})])],-1),K=e("label",{class:"text-gray-700",for:"codigo"},"CÃ³digo",-1),Q={class:"flex mt-2"},X=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-alphabet-uppercase pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M1.226 10.88H0l2.056-6.26h1.42l2.047 6.26h-1.29l-.48-1.61H1.707l-.48 1.61ZM2.76 5.818h-.054l-.75 2.532H3.51zm3.217 5.062V4.62h2.56c1.09 0 1.808.582 1.808 1.54 0 .762-.444 1.22-1.05 1.372v.055c.736.074 1.365.587 1.365 1.528 0 1.119-.89 1.766-2.133 1.766zM7.18 5.55v1.675h.8c.812 0 1.171-.308 1.171-.853 0-.51-.328-.822-.898-.822zm0 2.537V9.95h.903c.951 0 1.342-.312 1.342-.909 0-.591-.382-.954-1.095-.954zm5.089-.711v.775c0 1.156.49 1.803 1.347 1.803.705 0 1.163-.454 1.212-1.096H16v.12C15.942 10.173 14.95 11 13.607 11c-1.648 0-2.573-1.073-2.573-2.849v-.78c0-1.775.934-2.871 2.573-2.871 1.347 0 2.34.849 2.393 2.087v.115h-1.172c-.05-.665-.516-1.156-1.212-1.156-.849 0-1.347.67-1.347 1.83"})])],-1),Y=e("label",{class:"text-gray-700",for:"fechaEmision"},"Fecha",-1),ee={class:"flex mt-2"},te=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-alphabet-uppercase pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M1.226 10.88H0l2.056-6.26h1.42l2.047 6.26h-1.29l-.48-1.61H1.707l-.48 1.61ZM2.76 5.818h-.054l-.75 2.532H3.51zm3.217 5.062V4.62h2.56c1.09 0 1.808.582 1.808 1.54 0 .762-.444 1.22-1.05 1.372v.055c.736.074 1.365.587 1.365 1.528 0 1.119-.89 1.766-2.133 1.766zM7.18 5.55v1.675h.8c.812 0 1.171-.308 1.171-.853 0-.51-.328-.822-.898-.822zm0 2.537V9.95h.903c.951 0 1.342-.312 1.342-.909 0-.591-.382-.954-1.095-.954zm5.089-.711v.775c0 1.156.49 1.803 1.347 1.803.705 0 1.163-.454 1.212-1.096H16v.12C15.942 10.173 14.95 11 13.607 11c-1.648 0-2.573-1.073-2.573-2.849v-.78c0-1.775.934-2.871 2.573-2.871 1.347 0 2.34.849 2.393 2.087v.115h-1.172c-.05-.665-.516-1.156-1.212-1.156-.849 0-1.347.67-1.347 1.83"})])],-1),oe=e("label",{class:"text-gray-700",for:"metodoPago"},"Metodo de Pago",-1),le={class:"flex mt-2"},se=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-check2-square pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z"}),e("path",{d:"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0"})])],-1),ae=e("option",{value:"Efectivo"},"Efectivo",-1),re=e("option",{value:"Nequi"},"Nequi",-1),ie=e("option",{value:"Tarjeta"},"Tarjeta",-1),de=e("option",{value:"Credito"},"Credito",-1),ne=[ae,re,ie,de],ce={class:"py-2 my-2 overflow-y-auto"},ue={class:"inline-block min-w-full overflow-hidden align-middle border-b border-gray-200 shadow rounded"},pe={class:"min-w-full overflow-x-auto",style:{"font-size":"0.6rem"}},be=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-2 font-bold leading-4 tracking-wider text-left text-white uppercase bg-gray-900 border-b border-gray-200"}," Productos "),e("th",{class:"px-1 py-2 w-20 font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Cantidad "),e("th",{class:"px-1 py-2 w-28 font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Precio Unitario "),e("th",{class:"px-1 py-2 w-20 font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Descuento "),e("th",{class:"px-1 py-2 w-28 font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Valor Descuento "),e("th",{class:"px-1 py-2 w-24 font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Impuestos "),e("th",{class:"px-1 py-2 w-28 font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Subtotal "),e("th",{class:"px-1 py-2 w-28 font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Precio Total ")])],-1),me={key:0},he=e("td",{colspan:"8",class:"px-1 py-1 text-center text-red-500"}," Borraste un producto, pendejo. Pero el saldo de la venta seguira existiendo ",-1),ge=[he],fe={class:"bg-white"},xe={class:"px-1 py-1 border-b border-gray-200"},ve={class:"font-medium text-gray-900"},ye={class:"text-gray-900 whitespace-normal"},_e={class:"px-1 py-1 border-b border-gray-200 text-center"},we=["onUpdate:modelValue"],Ve={class:"px-1 py-1 border-b border-gray-200 text-center"},ze={class:"px-1 py-1 border-b border-gray-200 text-center"},Ce={class:"px-1 py-1 border-b border-gray-200 text-center"},Ue={class:"px-1 py-1 border-b border-gray-200 text-center"},ke={class:"px-1 py-1 border-b border-gray-200 text-center"},Me={class:"px-1 py-1 border-b border-gray-200 text-center"},Fe=e("td",{colspan:"3",class:"text-right font-semibold px-6 py-2 bg-white"},"Total:",-1),He={class:"px-1 py-1 border-b border-gray-200 text-center"},Te={class:"px-1 py-1 border-b border-gray-200 text-center"},Pe={class:"text-center font-semibold px-6 py-2 bg-white"},Be={class:"text-center font-semibold px-6 py-2 bg-white"},De={class:"text-center font-semibold px-6 py-2 bg-white"},Ne=e("td",null,null,-1),Ee={__name:"Show",setup(Le){const w=D(),V=M();F(()=>{z()}),axios.defaults.headers.common.Authorization="Bearer "+V.authToken;const o=g({}),f=g(!1),x=g(w.params.id),z=()=>{axios.get("/sales/"+x.value).then(u=>{o.value=u.data.sale,f.value=u.data.hasRefunds})},C=()=>o.value.product_sale?o.value.product_sale.reduce((l,b)=>l+(parseFloat(b.pivot.precio_total)||0),0)===parseFloat(o.value.total||0):!1,U=()=>{axios({url:`/sales/${x.value}/pdf`,method:"GET",responseType:"blob"}).then(u=>{const l=URL.createObjectURL(new Blob([u.data],{type:"application/pdf"})),b=window.open(l);setTimeout(()=>{b.print()},500)})};return(u,l)=>{const b=N("router-link");return c(),n(_,null,[e("div",L,[S,e("div",j,[a(b,{class:"inline-flex items-center text-xs mb-1 sm:mb-0 sm:mr-2 w-full px-2 h-8 bg-red-600 transition ease-in-out delay-75 hover:bg-red-700 text-white font-medium rounded-md",to:"/sales"},{default:H(()=>[E,v(" Regresar ")]),_:1}),e("button",{onClick:U,class:"inline-flex items-center text-xs mt-1 sm:mt-0 w-full px-2 h-8 bg-blue-600 transition ease-in-out delay-75 hover:bg-blue-700 text-white font-medium rounded-md"},[R,v(" Imprimir ")])])]),f.value?(c(),n("div",A," Esta venta tiene devoluciones asociadas. ")):(c(),n("div",O," Esta venta no tiene devoluciones asociadas. ")),e("div",$,[e("div",I,[e("form",null,[e("div",q,[o.value.customer?(c(),n("div",G,[Z,e("div",W,[J,p(e("input",{type:"text",class:"w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0","onUpdate:modelValue":l[0]||(l[0]=t=>o.value.customer.NombreRazonSocial=t),autocomplete:"off",disabled:""},null,512),[[h,o.value.customer.NombreRazonSocial]])])])):y("",!0),e("div",null,[K,e("div",Q,[X,p(e("input",{type:"text",class:"w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0","onUpdate:modelValue":l[1]||(l[1]=t=>o.value.codigo=t),autocomplete:"off",disabled:""},null,512),[[h,o.value.codigo]])])]),e("div",null,[Y,e("div",ee,[te,p(e("input",{type:"date",class:"w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0","onUpdate:modelValue":l[2]||(l[2]=t=>o.value.fechaEmision=t),autocomplete:"off",disabled:""},null,512),[[h,o.value.fechaEmision]])])]),e("div",null,[oe,e("div",le,[se,p(e("select",{class:"w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0","onUpdate:modelValue":l[3]||(l[3]=t=>o.value.metodoPago=t),disabled:""},ne,512),[[T,o.value.metodoPago]])])])]),p(e("div",ce,[e("div",ue,[e("table",pe,[be,C()?y("",!0):(c(),n("tr",me,ge)),e("tbody",fe,[(c(!0),n(_,null,B(o.value.product_sale,(t,k)=>(c(),n("tr",{key:k},[e("td",xe,[e("div",ve," # "+m(t.codigo),1),e("div",ye,m(t.descripcion),1)]),e("td",_e,[p(e("input",{type:"text",class:"bg-white w-full h-0 py-3 rounded pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"cantidad","onUpdate:modelValue":s=>t.pivot.cantidad=s,autocomplete:"off",disabled:""},null,8,we),[[h,t.pivot.cantidad]])]),e("td",Ve,[a(i(d),r({type:"text",class:"bg-white w-full h-0 py-3 rounded pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"precio_unitario",modelValue:t.pivot.precio_unitario,"onUpdate:modelValue":s=>t.pivot.precio_unitario=s,autocomplete:"off"},{prefix:"$ ",decimal:".",separator:",",minimumFractionDigits:2},{disabled:""}),null,16,["modelValue","onUpdate:modelValue"])]),e("td",ze,[a(i(d),r({type:"text",class:"bg-white w-full h-0 py-3 rounded pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"descuento",modelValue:t.pivot.descuento,"onUpdate:modelValue":s=>t.pivot.descuento=s,autocomplete:"off"},{prefix:"% "},{disabled:""}),null,16,["modelValue","onUpdate:modelValue"])]),e("td",Ce,[a(i(d),r({type:"text",class:"bg-white w-full h-0 py-3 rounded pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"valor_descuento",modelValue:t.pivot.valor_descuento,"onUpdate:modelValue":s=>t.pivot.valor_descuento=s,autocomplete:"off"},{prefix:"$ ",decimal:".",separator:",",minimumFractionDigits:2},{disabled:""}),null,16,["modelValue","onUpdate:modelValue"])]),e("td",Ue,[a(i(d),r({type:"text",class:"bg-white rounded w-full h-0 py-3 pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"impuestos",modelValue:t.pivot.impuestos,"onUpdate:modelValue":s=>t.pivot.impuestos=s,autocomplete:"off"},{prefix:"$ ",decimal:".",separator:",",minimumFractionDigits:2},{disabled:""}),null,16,["modelValue","onUpdate:modelValue"])]),e("td",ke,[a(i(d),r({type:"text",class:"bg-white rounded w-full h-0 py-3 pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"subtotal",modelValue:t.pivot.subtotal,"onUpdate:modelValue":s=>t.pivot.subtotal=s,autocomplete:"off"},{prefix:"$ ",decimal:".",separator:",",minimumFractionDigits:2},{disabled:""}),null,16,["modelValue","onUpdate:modelValue"])]),e("td",Me,[a(i(d),r({type:"text",class:"bg-white rounded w-full h-0 py-3 pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"precio_total",modelValue:t.pivot.precio_total,"onUpdate:modelValue":s=>t.pivot.precio_total=s,autocomplete:"off"},{prefix:"$ ",decimal:".",separator:",",minimumFractionDigits:2},{disabled:""}),null,16,["modelValue","onUpdate:modelValue"])])]))),128))]),e("tfoot",null,[e("tr",null,[Fe,e("td",He,[a(i(d),r({type:"text",class:"bg-white w-full h-0 py-3 rounded pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"",modelValue:o.value.descuento_global,"onUpdate:modelValue":l[4]||(l[4]=t=>o.value.descuento_global=t),autocomplete:"off"},{prefix:"% "},{disabled:""}),null,16,["modelValue"])]),e("td",Te,[a(i(d),r({type:"text",class:"bg-white w-full h-0 py-3 rounded pl-2 text-base font-regular outline-0",style:{"font-size":"0.7rem"},id:"",modelValue:o.value.valor_descuentoGlobal,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.valor_descuentoGlobal=t),autocomplete:"off"},{prefix:"$ ",minimumFractionDigits:2},{disabled:""}),null,16,["modelValue"])]),e("td",Pe,m(Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(o.value.impuestos)),1),e("td",Be,m(Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(o.value.subTotal)),1),e("td",De,m(Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(o.value.total)),1),Ne])])])])],512),[[P,o.value.product_sale]])])])])],64)}}};export{Ee as default};
