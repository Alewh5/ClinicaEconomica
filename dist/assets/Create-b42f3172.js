import{u as P,r as h,o as S,c as o,a as e,b as T,w as j,d as i,e as c,f as g,l as C,n as _,F as m,s as f,v as w,g as D,h as a,t as u}from"./index-ca603161.js";import{s as U}from"./function-124e4072.js";import"./index-d159f55b.js";import"./sweetalert2.all-4f88cff0.js";const L={class:"flex justify-between items-center"},N=e("h3",{class:"sm:text-2xl text-lg font-semibold text-gray-700"}," Trasladar Productos entre Bodegas ",-1),$={class:"flex flex-col items-start w-26 sm:flex-row sm:items-center"},I=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-box-arrow-left h-4 w-4 mr-2",viewBox:"0 0 16 16"},[e("path",{"fill-rule":"evenodd",d:"M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"}),e("path",{"fill-rule":"evenodd",d:"M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"})],-1),O=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-floppy-fill h-4 w-4 mr-2",viewBox:"0 0 16 16"},[e("path",{d:"M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z"}),e("path",{d:"M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z"})],-1),q={class:"mt-6"},F={class:"px-4 pb-8 pt-5 bg-white shadow-md"},E={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},R={class:"text-gray-700",for:"cellar_origen_id"},G={key:0,class:"text-red-500 mt-1 text-sm"},Z={class:"flex mt-2"},J=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-check2-square pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z"}),e("path",{d:"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0"})])],-1),K=e("option",{value:"",disabled:""},"Selecciona una bodega",-1),Q=["value"],W={key:0,disabled:""},X={class:"text-gray-700",for:"fecha_traslado"},Y={key:0,class:"text-red-500 mt-1 text-sm"},ee={class:"flex mt-2"},te=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-calendar-check pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0"}),e("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})])],-1),se={class:"text-gray-700",for:"cellar_destino_id"},oe={key:0,class:"text-red-500 mt-1 text-sm"},ae={class:"flex mt-2"},le=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-check2-square pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5z"}),e("path",{d:"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0"})])],-1),re=e("option",{value:"",disabled:""},"Selecciona una bodega",-1),de=["value"],ie={key:0,disabled:""},ne={class:"text-gray-700",for:"detalles"},ce={key:0,class:"text-red-500 mt-1 text-sm"},ue={class:"flex mt-2"},he=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-alphabet-uppercase pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M1.226 10.88H0l2.056-6.26h1.42l2.047 6.26h-1.29l-.48-1.61H1.707l-.48 1.61ZM2.76 5.818h-.054l-.75 2.532H3.51zm3.217 5.062V4.62h2.56c1.09 0 1.808.582 1.808 1.54 0 .762-.444 1.22-1.05 1.372v.055c.736.074 1.365.587 1.365 1.528 0 1.119-.89 1.766-2.133 1.766zM7.18 5.55v1.675h.8c.812 0 1.171-.308 1.171-.853 0-.51-.328-.822-.898-.822zm0 2.537V9.95h.903c.951 0 1.342-.312 1.342-.909 0-.591-.382-.954-1.095-.954zm5.089-.711v.775c0 1.156.49 1.803 1.347 1.803.705 0 1.163-.454 1.212-1.096H16v.12C15.942 10.173 14.95 11 13.607 11c-1.648 0-2.573-1.073-2.573-2.849v-.78c0-1.775.934-2.871 2.573-2.871 1.347 0 2.34.849 2.393 2.087v.115h-1.172c-.05-.665-.516-1.156-1.212-1.156-.849 0-1.347.67-1.347 1.83"})])],-1),ge={class:"grid grid-cols-1 mt-6 sm:grid-cols-2 lg:grid-cols-2"},_e={class:"relative"},pe={class:"text-gray-700",for:"searchProduct"},be={key:0,class:"text-red-500 mt-1 text-sm"},ve={class:"flex mt-2"},me=e("div",{class:"flex items-center justify-center rounded-tl-lg rounded-bl-lg border-y border-l relative border-gray-400 bg-white p-5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-search-heart pointer-events-none absolute w-5 h-5 fill-gray-500 transition",viewBox:"0 0 16 16"},[e("path",{d:"M6.5 4.482c1.664-1.673 5.825 1.254 0 5.018-5.825-3.764-1.664-6.69 0-5.018"}),e("path",{d:"M13 6.5a6.47 6.47 0 0 1-1.258 3.844q.06.044.115.098l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1-.1-.115h.002A6.5 6.5 0 1 1 13 6.5M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11"})])],-1),xe={key:0,class:"mt-4 absolute top-16 bg-white border rounded border-gray-300 w-full overflow-y-auto"},fe={class:"font-medium"},we={class:"inline-flex px-2 text-xs font-semibold leading-5 text-green-800 bg-green-100 rounded-full"},ye=["onClick"],ke={class:"py-2 my-2 overflow-x-auto overflow-y-auto sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8"},Ce={class:"inline-block min-w-full overflow-hidden align-middle border-b border-gray-200 shadow rounded"},Ve={class:"min-w-full"},Ae=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-2 text-xs font-bold leading-4 tracking-wider text-left text-white uppercase bg-gray-900 border-b border-gray-200"}," Productos "),e("th",{class:"px-6 py-2 text-xs font-bold leading-4 tracking-wider text-left text-white uppercase bg-gray-900 border-b border-gray-200"}," Detalles "),e("th",{class:"px-6 py-2 text-xs font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Cantidad "),e("th",{class:"px-6 py-2 text-xs font-bold leading-4 tracking-wider text-center text-white uppercase bg-gray-900 border-b border-gray-200"}," Acciones ")])],-1),Me={class:"bg-white"},Be={class:"px-6 py-2 border-b border-gray-200 whitespace-nowrap"},ze={class:"text-sm font-medium leading-5 text-gray-900"},He={class:"text-sm leading-5 text-gray-900 whitespace-normal"},Pe={class:"px-6 py-2 border-b border-gray-200 whitespace-nowrap"},Se={class:"text-sm leading-5 text-gray-900"},Te=e("span",{class:"font-semibold"},"MARCA:",-1),je={class:"text-sm leading-5 text-gray-900"},De=e("span",{class:"font-semibold"},"CATEGORIA:",-1),Ue={class:"px-3 py-2 border-b border-gray-200 whitespace-nowrap text-center"},Le=["onUpdate:modelValue","onChange"],Ne={class:"px-1 py-2 border-b border-gray-200 whitespace-nowrap text-center"},$e={class:"flex items-center justify-center"},Ie=["onClick"],Oe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3-fill",viewBox:"0 0 16 16"},[e("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"})],-1),qe=[Oe],Je={__name:"Create",setup(Fe){const V=P();axios.defaults.headers.common.Authorization="Bearer "+V.authToken;const r=h({cellar_origen_id:"",fecha_traslado:new Date().toISOString().split("T")[0],cellar_destino_id:"",detalles:"",products:[]}),p=h([]),b=h(""),k=h([]),A=async l=>{const s=await axios.get(`/cellars?page=${l}`);p.value=s.data.data},M=async()=>{const l=await axios.get(`/searchProduct?search=${b.value}`);k.value=l.data},v=h([]),B=l=>{const s=r.value.products.findIndex(y=>y.product_id===l.id);s!==-1?r.value.products[s].cantidad++:(r.value.products.push({product_id:l.id,cantidad:1}),v.value.push({product_codigo:l.codigo,product_descripcion:l.descripcion,product_marca:l.marca,product_categoria:l.categoria})),b.value=""},z=async l=>{r.value.products.splice(l,1)},d=h({}),H=async()=>{const{status:l,list_errors:s}=await U("POST",r.value,"/transfers","/transfers");l==422&&(d.value=s)};return S(()=>{A(1)}),(l,s)=>{const y=D("router-link");return a(),o(m,null,[e("div",L,[N,e("div",$,[T(y,{class:"inline-flex items-center text-xs mb-1 sm:mb-0 sm:mr-2 w-full px-2 h-8 bg-yellow-500 transition ease-in-out delay-75 hover:bg-yellow-700 text-white font-medium rounded-md",to:"/transfers"},{default:j(()=>[I,i(" Traslados ")]),_:1}),e("button",{onClick:H,class:"inline-flex items-center text-xs mt-1 sm:mt-0 w-full px-2 h-8 bg-blue-600 transition ease-in-out delay-75 hover:bg-blue-700 text-white font-medium rounded-md"},[O,i(" Guardar ")])])]),e("div",q,[e("div",F,[e("form",null,[e("div",E,[e("div",null,[e("label",R,[i("Bodega Origen "),d.value.cellar_origen_id?(a(),o("span",G,"*")):c("",!0)]),e("div",Z,[J,g(e("select",{class:_(["w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0",{"border-red-500 border-2":d.value.cellar_origen_id}]),id:"cellar_origen_id","onUpdate:modelValue":s[0]||(s[0]=t=>r.value.cellar_origen_id=t)},[K,(a(!0),o(m,null,f(p.value,t=>(a(),o("option",{key:t.id,value:t.id},u(t.nombre),9,Q))),128)),p.value?c("",!0):(a(),o("option",W,"No hay bodegas disponibles"))],2),[[C,r.value.cellar_origen_id]])])]),e("div",null,[e("label",X,[i("Fecha "),d.value.fecha_traslado?(a(),o("span",Y,"*")):c("",!0)]),e("div",ee,[te,g(e("input",{type:"date",class:_(["w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0",{"border-red-500 border-2":d.value.fecha_traslado}]),id:"fecha_traslado","onUpdate:modelValue":s[1]||(s[1]=t=>r.value.fecha_traslado=t),autocomplete:"off"},null,2),[[w,r.value.fecha_traslado]])])]),e("div",null,[e("label",se,[i("Bodega Destino "),d.value.cellar_destino_id?(a(),o("span",oe,"*")):c("",!0)]),e("div",ae,[le,g(e("select",{class:_(["w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0",{"border-red-500 border-2":d.value.cellar_destino_id}]),id:"cellar_destino_id","onUpdate:modelValue":s[2]||(s[2]=t=>r.value.cellar_destino_id=t)},[re,(a(!0),o(m,null,f(p.value,t=>(a(),o("option",{key:t.id,value:t.id},u(t.nombre),9,de))),128)),p.value?c("",!0):(a(),o("option",ie,"No hay bodegas disponibles"))],2),[[C,r.value.cellar_destino_id]])])]),e("div",null,[e("label",ne,[i("Detalles "),d.value.detalles?(a(),o("span",ce,"*")):c("",!0)]),e("div",ue,[he,g(e("input",{type:"text",class:_(["w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0",{"border-red-500 border-2":d.value.detalles}]),id:"detalles","onUpdate:modelValue":s[3]||(s[3]=t=>r.value.detalles=t),autocomplete:"off"},null,2),[[w,r.value.detalles]])])])]),e("div",ge,[e("div",_e,[e("label",pe,[i("Buscar Productos "),d.value.products?(a(),o("span",be,"*")):c("",!0)]),e("div",ve,[me,g(e("input",{type:"text",class:_(["w-full bg-white rounded-r-md pl-2 text-base font-regular outline-0",{"border-red-500 border-2":d.value.products}]),id:"searchProduct","onUpdate:modelValue":s[4]||(s[4]=t=>b.value=t),autocomplete:"off",onInput:M},null,34),[[w,b.value]])]),b.value.length>0?(a(),o("div",xe,[e("ul",null,[(a(!0),o(m,null,f(k.value.slice(0,5),(t,n)=>(a(),o("li",{key:n,class:"text-gray-700 border-b border-gray-300 p-2 flex items-center justify-between"},[e("span",fe,[i(u(t.descripcion)+" - ",1),e("span",we,"$ "+u(t.precio),1)]),e("button",{onClick:x=>B(t),class:"ml-2 bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"Agregar",8,ye)]))),128))])])):c("",!0)])]),e("div",ke,[e("div",Ce,[e("table",Ve,[Ae,e("tbody",Me,[(a(!0),o(m,null,f(r.value.products,(t,n)=>(a(),o("tr",{key:n},[e("td",Be,[e("div",ze," COD: "+u(v.value[n].product_codigo),1),e("div",He,u(v.value[n].product_descripcion),1)]),e("td",Pe,[e("div",Se,[Te,i(" "+u(v.value[n].product_marca),1)]),e("div",je,[De,i(" "+u(v.value[n].product_categoria),1)])]),e("td",Ue,[g(e("input",{type:"text",class:_(["w-full bg-white rounded pl-2 text-base font-regular outline-0",{"border-red-500 border-2":d.value["products."+n+".cantidad"]}]),id:"cantidad","onUpdate:modelValue":x=>t.cantidad=x,autocomplete:"off",onChange:x=>l.calcularCostoTotal(t)},null,42,Le),[[w,t.cantidad]])]),e("td",Ne,[e("div",$e,[e("a",{onClick:x=>z(n),class:"text-red-500 cursor-pointer hover:text-red-700"},qe,8,Ie)])])]))),128))])])])])])])])],64)}}};export{Je as default};
